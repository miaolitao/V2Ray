# GitHub Actions è‡ªåŠ¨è¿è¡Œè®¾ç½®æŒ‡å—

æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•è®¾ç½® GitHub Actions è‡ªåŠ¨æ¯ 6 å°æ—¶è¿è¡Œä¸€æ¬¡èŠ‚ç‚¹çˆ¬å–ä»»åŠ¡ã€‚

## âœ… å·²é…ç½®å†…å®¹

- âœ… å®šæ—¶ä»»åŠ¡ï¼šæ¯ 6 å°æ—¶è‡ªåŠ¨è¿è¡Œä¸€æ¬¡
- âœ… æ‰‹åŠ¨è§¦å‘ï¼šæ”¯æŒåœ¨ GitHub ç½‘é¡µä¸Šæ‰‹åŠ¨è¿è¡Œ
- âœ… è‡ªåŠ¨æäº¤ï¼šè¿è¡Œç»“æœè‡ªåŠ¨æäº¤åˆ°ä»“åº“
- âœ… å·¥ä½œæµæ–‡ä»¶ï¼š`.github/workflows/update-nodes.yml`

---

## ğŸ“‹ å¯ç”¨æ­¥éª¤

### æ­¥éª¤ 1: æäº¤æœ€æ–°çš„ workflow é…ç½®

```bash
cd /path/to/V2Ray
git add .github/workflows/update-nodes.yml
git commit -m "ğŸ”§ æ›´æ–° GitHub Actions é…ç½®ä»¥æ”¯æŒæ—¶é—´æˆ³ç›®å½•"
git push
```

### æ­¥éª¤ 2: åœ¨ GitHub ä¸Šå¯ç”¨ Actions

1. æ‰“å¼€ä½ çš„ GitHub ä»“åº“é¡µé¢
2. ç‚¹å‡»é¡¶éƒ¨çš„ **Actions** æ ‡ç­¾
3. å¦‚æœçœ‹åˆ°æç¤ºï¼Œç‚¹å‡» **"I understand my workflows, go ahead and enable them"**

### æ­¥éª¤ 3: è®¾ç½®ä»“åº“æƒé™ï¼ˆâš ï¸ é‡è¦ï¼ï¼‰

è¿™ä¸€æ­¥æ˜¯å¿…é¡»çš„ï¼Œå¦åˆ™ Actions æ— æ³•è‡ªåŠ¨æäº¤ç»“æœã€‚

1. ç‚¹å‡»ä»“åº“çš„ **Settings**ï¼ˆè®¾ç½®ï¼‰
2. å·¦ä¾§èœå•æ‰¾åˆ° **Actions** â†’ **General**
3. æ»šåŠ¨åˆ°åº•éƒ¨ **"Workflow permissions"**
4. é€‰æ‹© âœ… **"Read and write permissions"**
5. å‹¾é€‰ âœ… **"Allow GitHub Actions to create and approve pull requests"**
6. ç‚¹å‡» **Save** ä¿å­˜

### æ­¥éª¤ 4: æ‰‹åŠ¨æµ‹è¯•è¿è¡Œ

1. å›åˆ° **Actions** é¡µé¢
2. å·¦ä¾§ç‚¹å‡» **"æ›´æ–°èŠ‚ç‚¹"**
3. å³ä¾§ç‚¹å‡» **"Run workflow"** ä¸‹æ‹‰èœå•
4. é€‰æ‹©è¿è¡Œé€‰é¡¹ï¼š
   - **è·³è¿‡æµ‹é€Ÿ**ï¼šâœ“ï¼ˆæ¨èï¼Œé€Ÿåº¦å¿«ï¼‰
   - **è¾“å‡ºæ ¼å¼**ï¼šall
5. ç‚¹å‡»ç»¿è‰² **"Run workflow"** æŒ‰é’®
6. ç­‰å¾… 2-3 åˆ†é’Ÿï¼ŒæŸ¥çœ‹è¿è¡Œç»“æœ

---

## â° å®šæ—¶è¿è¡Œè¯´æ˜

### è¿è¡Œæ—¶é—´è¡¨

| UTC æ—¶é—´ | åŒ—äº¬æ—¶é—´ï¼ˆUTC+8ï¼‰ | è¯´æ˜ |
|---------|----------------|-----|
| 00:00   | 08:00 æ—©ä¸Š     | â° æ—©ä¸Šæ›´æ–° |
| 06:00   | 14:00 ä¸‹åˆ     | â° ä¸‹åˆæ›´æ–° |
| 12:00   | 20:00 æ™šä¸Š     | â° æ™šä¸Šæ›´æ–° |
| 18:00   | 02:00 å‡Œæ™¨     | â° å‡Œæ™¨æ›´æ–° |

ä¹Ÿå°±æ˜¯è¯´ï¼Œ**æ¯å¤©ä¼šåœ¨æ—©ä¸Š8ç‚¹ã€ä¸‹åˆ2ç‚¹ã€æ™šä¸Š8ç‚¹ã€å‡Œæ™¨2ç‚¹è‡ªåŠ¨è¿è¡Œ 4 æ¬¡**ã€‚

### ä¿®æ”¹è¿è¡Œé¢‘ç‡

ç¼–è¾‘ `.github/workflows/update-nodes.yml` æ–‡ä»¶ä¸­çš„ `cron` è¡¨è¾¾å¼ï¼š

```yaml
schedule:
  # æ¯ 3 å°æ—¶è¿è¡Œä¸€æ¬¡
  - cron: '0 */3 * * *'
  
  # æ¯ 12 å°æ—¶è¿è¡Œä¸€æ¬¡
  - cron: '0 */12 * * *'
  
  # æ¯å¤©å›ºå®šæ—¶é—´ï¼ˆUTC 00:00 å’Œ 12:00ï¼‰
  - cron: '0 0,12 * * *'
  
  # æ¯å¤©åŒ—äº¬æ—¶é—´æ—©ä¸Š 9 ç‚¹ï¼ˆUTC 01:00ï¼‰
  - cron: '0 1 * * *'
```

---

## ğŸ“± ä½¿ç”¨è®¢é˜…é“¾æ¥

è®¾ç½®å®Œæˆåï¼Œä½ å¯ä»¥åœ¨ä»£ç†å®¢æˆ·ç«¯ä¸­æ·»åŠ è®¢é˜…é“¾æ¥ï¼Œè®¢é˜…é“¾æ¥ä¼šéšç€ GitHub Actions è‡ªåŠ¨æ›´æ–°ã€‚

### Clash / Clash Verge

```
https://raw.githubusercontent.com/miaolitao/V2Ray/main/output/latest/clash.yaml
```

### V2RayN / V2RayNG (Base64)

```
https://raw.githubusercontent.com/miaolitao/V2Ray/main/output/latest/nodes.txt
```

### Surge

```
https://raw.githubusercontent.com/miaolitao/V2Ray/main/output/latest/surge.conf
```

### Quantumult X

```
https://raw.githubusercontent.com/miaolitao/V2Ray/main/output/latest/quantumult.conf
```

### ğŸ’¡ è®¢é˜…ä½¿ç”¨å»ºè®®

- âœ… åœ¨ä»£ç†å®¢æˆ·ç«¯ä¸­è®¾ç½®**è‡ªåŠ¨æ›´æ–°è®¢é˜…**ï¼ˆæ¨èæ¯å°æ—¶æˆ–æ¯å¤©æ›´æ–°ä¸€æ¬¡ï¼‰
- âœ… `latest` ç›®å½•å§‹ç»ˆåŒ…å«æœ€æ–°çš„èŠ‚ç‚¹é…ç½®
- âœ… æ— éœ€æ‰‹åŠ¨ä¸‹è½½ï¼Œå®¢æˆ·ç«¯ä¼šè‡ªåŠ¨ä» GitHub æ‹‰å–æœ€æ–°é…ç½®

---

## ğŸ” ç›‘æ§è¿è¡ŒçŠ¶æ€

### æŸ¥çœ‹è¿è¡Œå†å²

1. è¿›å…¥ GitHub ä»“åº“çš„ **Actions** é¡µé¢
2. å¯ä»¥çœ‹åˆ°æ‰€æœ‰è¿è¡Œè®°å½•
3. ç‚¹å‡»ä»»æ„ä¸€æ¡æŸ¥çœ‹è¯¦ç»†æ—¥å¿—

### è¿è¡ŒçŠ¶æ€è¯´æ˜

- âœ… **ç»¿è‰²å¯¹å‹¾** - è¿è¡ŒæˆåŠŸ
- âŒ **çº¢è‰²å‰å·** - è¿è¡Œå¤±è´¥
- ğŸŸ¡ **é»„è‰²åœ†åœˆ** - æ­£åœ¨è¿è¡Œ

### è‡ªåŠ¨æäº¤è®°å½•

æ¯æ¬¡æˆåŠŸè¿è¡Œåï¼Œä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæäº¤ï¼Œæ ¼å¼ç±»ä¼¼ï¼š

```
ğŸ”„ æ›´æ–°èŠ‚ç‚¹ - 2025-11-06 14:00:00 - èŠ‚ç‚¹æ•°: 50
```

---

## âš™ï¸ è‡ªå®šä¹‰é…ç½®

### ä¿®æ”¹èŠ‚ç‚¹æ•°é‡

ç¼–è¾‘ `.github/workflows/update-nodes.yml`ï¼Œåœ¨è¿è¡Œå‘½ä»¤ä¸­æ·»åŠ  `--max-nodes` å‚æ•°ï¼š

```yaml
- name: è¿è¡ŒèŠ‚ç‚¹æ›´æ–°
  run: |
    python main.py --skip-test --max-nodes 100
```

### å¯ç”¨é€Ÿåº¦æµ‹è¯•

å°† `--skip-test` å‚æ•°ç§»é™¤ï¼š

```yaml
- name: è¿è¡ŒèŠ‚ç‚¹æ›´æ–°
  run: |
    python main.py --max-nodes 50
```

âš ï¸ æ³¨æ„ï¼šå¯ç”¨é€Ÿåº¦æµ‹è¯•ä¼šæ˜¾è‘—å¢åŠ è¿è¡Œæ—¶é—´ï¼ˆçº¦ 5-10 åˆ†é’Ÿï¼‰ã€‚

### åªç”Ÿæˆç‰¹å®šæ ¼å¼

ä½¿ç”¨ `--format` å‚æ•°ï¼š

```yaml
- name: è¿è¡ŒèŠ‚ç‚¹æ›´æ–°
  run: |
    python main.py --skip-test --format clash
```

æ”¯æŒçš„æ ¼å¼ï¼š`all`ã€`base64`ã€`clash`ã€`v2ray`ã€`surge`ã€`quantumult`

---

## âœ… éªŒè¯æ˜¯å¦æˆåŠŸ

### 1. æ£€æŸ¥ Actions è¿è¡ŒçŠ¶æ€

è®¿é—®ï¼š`https://github.com/miaolitao/V2Ray/actions`

âœ… çœ‹åˆ°ç»¿è‰²å¯¹å‹¾è¡¨ç¤ºè¿è¡ŒæˆåŠŸ

### 2. æ£€æŸ¥æäº¤è®°å½•

åœ¨ä»“åº“é¦–é¡µåº”è¯¥èƒ½çœ‹åˆ°è‡ªåŠ¨æäº¤ï¼Œæ ¼å¼ç±»ä¼¼ï¼š

```
ğŸ”„ æ›´æ–°èŠ‚ç‚¹ - 2025-11-06 14:00:00 - èŠ‚ç‚¹æ•°: 50
```

### 3. æ£€æŸ¥è¾“å‡ºæ–‡ä»¶

è®¿é—®ï¼š`https://github.com/miaolitao/V2Ray/tree/main/output/latest`

åº”è¯¥èƒ½çœ‹åˆ°ï¼š
- `clash.yaml`
- `v2ray.json`
- `nodes.txt`
- `surge.conf`
- `quantumult.conf`
- `stats.json`

---

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: Actions è¿è¡Œå¤±è´¥

**å¯èƒ½åŸå› **ï¼š
- ä»“åº“æƒé™è®¾ç½®ä¸æ­£ç¡®
- Python ä¾èµ–å®‰è£…å¤±è´¥
- èŠ‚ç‚¹æºæ— æ³•è®¿é—®

**è§£å†³æ–¹æ³•**ï¼š
1. æ£€æŸ¥ Actions æ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯
2. ç¡®è®¤ä»“åº“æƒé™ä¸º "Read and write permissions"
3. æŸ¥çœ‹æ˜¯å¦æœ‰ç½‘ç»œè¿æ¥é—®é¢˜

### é—®é¢˜ 2: æ— æ³•è‡ªåŠ¨æäº¤ç»“æœ

**å¯èƒ½åŸå› **ï¼š
- Workflow permissions æœªè®¾ç½®ä¸º "Read and write permissions"

**è§£å†³æ–¹æ³•**ï¼š
1. è¿›å…¥ **Settings** â†’ **Actions** â†’ **General**
2. æ»šåŠ¨åˆ° **"Workflow permissions"**
3. é€‰æ‹© **"Read and write permissions"**
4. å‹¾é€‰ **"Allow GitHub Actions to create and approve pull requests"**
5. ä¿å­˜è®¾ç½®

### é—®é¢˜ 3: è®¢é˜…é“¾æ¥æ— æ³•è®¿é—®

**å¯èƒ½åŸå› **ï¼š
- ä»“åº“æ˜¯ç§æœ‰çš„
- æ–‡ä»¶è·¯å¾„ä¸æ­£ç¡®

**è§£å†³æ–¹æ³•**ï¼š
1. ç¡®ä¿ä»“åº“æ˜¯å…¬å¼€çš„ï¼ˆPublicï¼‰
2. æ£€æŸ¥æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®
3. ä½¿ç”¨ `raw.githubusercontent.com` è€Œä¸æ˜¯ `github.com`

### é—®é¢˜ 4: èŠ‚ç‚¹æ•°é‡å¤ªå°‘

**å¯èƒ½åŸå› **ï¼š
- å¾ˆå¤šèŠ‚ç‚¹æºå¤±æ•ˆäº†
- `--max-nodes` å‚æ•°è®¾ç½®å¤ªå°

**è§£å†³æ–¹æ³•**ï¼š
1. å¢åŠ  `--max-nodes` å‚æ•°å€¼
2. ç§»é™¤å¤±æ•ˆçš„èŠ‚ç‚¹æº
3. æ·»åŠ æ–°çš„èŠ‚ç‚¹æºåˆ° `config/sources.yaml`

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [ä½¿ç”¨è¯´æ˜](USAGE.md)
- [é¡¹ç›®ç»“æ„](PROJECT_STRUCTURE.md)
- [å¼€å‘æŒ‡å—](DEVELOPMENT.md)

---

## ğŸ†˜ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. æŸ¥çœ‹ [Issues](https://github.com/miaolitao/V2Ray/issues)
2. æäº¤æ–°çš„ Issue
3. æŸ¥çœ‹ Actions è¿è¡Œæ—¥å¿—è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯

